import{_ as a,d as e,u as t,a as s,b as o,r,c as l,A as n,O as i,N as u,e as d,f as m,o as p,g as c,h as f,w as g,i as b,t as h,j as v,p as _,k as N}from"./index.8b07ba7d.js";import{u as w}from"./use-notification.ba77bf42.js";import{N as S,a as I}from"./FormItem.21828408.js";const y=e({setup(){const a=t(),e=s(),u=w(),{t:d}=o(),m=r({email:"",password:""});let p=l(!1);return{APP_NAME:n,ON_PERMISSION:i,loading:p,formState:m,rules:{username:{required:!0,trigger:"blur",message:""},password:{required:!0,trigger:"blur",message:""}},handleSubmit:async function(){p.value=!0;let t=await a.dispatch("user/LOGIN",m);var s,o;200!=t.status?(s="error",o=t.message,u[s]({content:o,duration:1300})):(await a.dispatch("user/INITUSERINFO",t.data),localStorage.setItem("token",t.data.token),e.push("/dashboard")),p.value=!1},handleRegister:function(){e.push("/register")},invalidForm:function(){let{email:a,password:e}=m;return""===a||""===e},t:d}},components:{NForm:S,NFormItem:I,NInput:u,NButton:d}}),k={class:"i-container"},F=(a=>(_("data-v-230bafbc"),a=a(),N(),a))((()=>b("p",{class:"i-form-msg"},"没号就乖乖注册",-1)));var A=a(y,[["render",function(a,e,t,s,o,r){const l=m("n-input"),n=m("n-form-item"),i=m("n-button"),u=m("n-form");return p(),c("div",k,[f(u,{model:a.formState,rules:a.rules,class:"i-form","label-placement":"left"},{default:g((()=>[b("h1",null,h(a.APP_NAME),1),f(n,{path:"email"},{default:g((()=>[f(l,{value:a.formState.email,"onUpdate:value":e[0]||(e[0]=e=>a.formState.email=e),placeholder:a.t("common.email"),"input-props":{autocomplete:"off"}},null,8,["value","placeholder"])])),_:1}),f(n,{path:"password"},{default:g((()=>[f(l,{value:a.formState.password,"onUpdate:value":e[1]||(e[1]=e=>a.formState.password=e),type:"password",placeholder:a.t("common.password"),"input-props":{autocomplete:"off"}},null,8,["value","placeholder"])])),_:1}),f(n,null,{default:g((()=>[F,f(i,{quaternary:"",style:{margin:"0 15px 0 0"},onClick:a.handleRegister},{default:g((()=>[v(h(a.t("common.sign_up")),1)])),_:1},8,["onClick"]),f(i,{type:"primary","attr-type":"submit",loading:a.loading,onClick:a.handleSubmit,disabled:a.invalidForm(),style:{width:"120px"}},{default:g((()=>[v(h(a.t("common.sign_in")),1)])),_:1},8,["loading","onClick","disabled"])])),_:1})])),_:1},8,["model","rules"])])}],["__scopeId","data-v-230bafbc"]]);export{A as default};
